(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{138:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return j}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),i=function(e){var t=r.a.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=i(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,b=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),s=i(a),u=n,j=s["".concat(b,".").concat(u)]||s[u]||m[u]||c;return a?r.a.createElement(j,o(o({ref:t},p),{},{components:a})):r.a.createElement(j,o({ref:t},p))}));function j(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,b=new Array(c);b[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,b[1]=o;for(var p=2;p<c;p++)b[p]=a[p];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},240:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/state-340bbc2ac9d59ab321aeee995da7c42f.pdf"},92:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return o})),a.d(t,"toc",(function(){return l})),a.d(t,"default",(function(){return i}));var n=a(3),r=a(7),c=(a(0),a(138)),b={subject:"DBS"},o={unversionedId:"bi-spol-10/bi-spol-10",id:"bi-spol-10/bi-spol-10",isDocsHomePage:!1,title:"bi-spol-10",description:"Po\u017eadavky na konzistenci datab\xe1ze",source:"@site/topics/bi-spol-10/bi-spol-10.mdx",slug:"/bi-spol-10/bi-spol-10",permalink:"/szz-bootcamp/topics/bi-spol-10/bi-spol-10",version:"current",lastUpdatedBy:"Tomas Vosicky",sidebar:"someSidebar",previous:{title:"bi-spol-09",permalink:"/szz-bootcamp/topics/bi-spol-09/bi-spol-09"},next:{title:"bi-spol-11",permalink:"/szz-bootcamp/topics/bi-spol-11/bi-spol-11"}},l=[],p={toc:l};function i(e){var t=e.components,b=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},p,b,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"po\u017eadavky-na-konzistenci-datab\xe1ze"},"Po\u017eadavky na konzistenci datab\xe1ze"),Object(c.b)("p",null,"V r\xe1mci DBMS (Database Management Service) je pot\u0159eba myslet na\nkonzistenci dat a jejich ochranu. Je pot\u0159eba myslet na to, \u017ee \u017e\xe1dn\xe1 akce\nby nem\u011bla ohrozit integritu cel\xe9ho syst\xe9mu."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Dva z\xe1kladn\xed po\u017eadavky na DBMS:"),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"chr\xe1nit data -- ve smyslu odolnosti v\u016f\u010di r\u016fzn\xfdm hav\xe1ri\xedm serveru")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"poskytnout korektn\xed, rychl\xfd a asynchronn\xed p\u0159\xedstup vet\u0161\xedmu\nmno\u017estv\xed sou\u010dasn\u011b pracuj\xedc\xedch u\u017eivatel\u016f.")))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"\u0158e\u0161en\xed"),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"komponenta \u0159\xedzen\xed soube\u017en\xe9ho (paraleln\xedho) zpracov\xe1n\xed\n(concurreny control)")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"komponenta zotaven\xed z chyb (recovery)"))))),Object(c.b)("h1",{id:"transakce"},"Transakce"),Object(c.b)("p",null,"Vhodn\xe1 programov\xe1 jednotka a vhodn\xe9 mechanismy, kter\xe9 zabezpe\u010d\xed, \u017ee po\nskon\u010den\xed akce (korektn\xedm i nekorektn\xedm) z\u016fstane datab\xe1ze konzistentn\xed\n(plat\xed v\u0161echna IO definovan\xe1 ve sch\xe9matu)."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"COMMIT - potvrzen\xed")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"ROLLBACK - zru\u0161en\xed"))),Object(c.b)("p",null,"Stavov\xfd diagram transakce"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"aktivn\xed (Active) - od za\u010d\xe1tku (prob\xedhaj\xed DML p\u0159\xedkazy)")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"\u010d\xe1ste\u010dn\u011b potvrzen\xfd (Partially Commited) - po proveden\xed posledn\xed\noperace transakce")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"potvrzen\xfd (Commited) - po \xfaspe\u0161n\xe9m zakon\u010den\xed, tj. po potvrzen\xed\noperace COMMIT")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"chybn\xfd (Failed) - v norm\xe1ln\xedm pr\u016fb\u011bhu transakce nelze pokra\u010dovat")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"zru\u0161en\xfd (ABorted) - po skon\u010den\xed operace ROLLBACK, tj. uveden\xed\ndatab\xe1ze do stavu p\u0159ed zapo\u010det\xedm transakce"))),Object(c.b)("p",null,Object(c.b)("img",{alt:" ",src:a(240).default}),'{width="50%"}'),Object(c.b)("h1",{id:"acid-vlastnosti-transakce"},"ACID vlastnosti transakce"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"atomicita (Atomicity) - transakce mus\xed bu\u010f prob\u011bhnout cel\xe1, nebo\nv\u016fbec")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"konzistence (Consistency) - transformuje datab\xe1zi z konzistentn\xedho\nstavu do jin\xe9ho konzistentn\xedho stavu")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"nez\xe1vislost (Independence) - d\xedl\u010d\xed efekty jedn\xe9 transakce nejsou\nviditeln\xe9 jin\xfdm transakc\xedm")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"trvanlivost (Durability) - efekty \xfasp\u011b\u0161n\xe9 transakce jsou trvale\nulo\u017eeny"))),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"\u017durn\xe1l")," obsahuje sekvenci zm\u011bnov\xfdch vektor\u016f \\<XID, pageID, offset,\nlength, old data, new data",">"," \u017durn\xe1l a p\u0159idru\u017een\xe1 infrastruktura umo\u017e\u0148uje\nimplementaci Atomicity a Durability u transak\u010dn\xedho zpracov\xe1n\xed. Informace\nz transak\u010dn\xedho \u017eurn\xe1lu se pou\u017e\xedvaj\xed pouze pro obnovu datab\xe1ze po chyb\u011b."),Object(c.b)("h1",{id:"rozvrhy"},"Rozvrhy"),Object(c.b)("p",null,"Stanoven\xed po\u0159ad\xed prov\xe1d\u011bn\xed d\xedl\u010d\xedch akc\xed v\xedce transakc\xed v \u010dase nazveme\n",Object(c.b)("strong",{parentName:"p"},"rozvrhem"),". Rozvrh je korektn\xed, kdy\u017e je v n\u011bjak\xe9m smyslu ekvivalentn\xed\nkter\xe9mukoliv s\xe9riov\xe9mu rozvrhu."),Object(c.b)("p",null,"Rozvrh je uspo\u0159\xe1dateln\xfd (koretn\xed) pokud nem\xe1 precenden\u010dn\xed graf kru\u017enici.\nRozvrhy jsou ekvivalentn\xed maj\xed-li stejn\xfd precenden\u010dn\xed graf."),Object(c.b)("p",null,"Precenden\u010dn\xed graf rozvrhu:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"uzly = jednotliv\xe9 transakce rozvrhu")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"hrany (orientovan\xe9)"),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"jedna transakce READ(A) p\u0159ed t\xedm ne\u017e druh\xe1 transakce WRITE(A)")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"jedna transakce WRITE(A) p\u0159ed t\xedm ne\u017e druh\xe1 transakce READ(A)")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"posledn\xed WRITE(A) v jend\xe9 transkaci je p\u0159ed posledn\xedm WRITE(A) v\ndruh\xe9 transakci."))))),Object(c.b)("p",null,"Paraleln\xed zpracovan\xed transakc\xed:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Testov\xe1n\xed uspo\u0159\xe1datelnosti")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Uzamyk\xe1ni (LOCK TABLE)"))),Object(c.b)("p",null,"Dvouf\xe1zov\xe1 transakce:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"1","."," f\xe1ze - uzamyk\xe1 se, nic neodemyk\xe1")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"2","."," f\xe1ze - od prvn\xedho odemknut\xed do konce se u\u017e nic nezamyk\xe1"))),Object(c.b)("p",null,"Dob\u0159e formovan\xe9 transakce:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"transakce zamyk\xe1 objekt, chce-li k n\u011bmu p\u0159istupovat")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"transakce nezamyk\xe1 objekt, kter\xfd ji\u017e zamkla")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"transakce neodmyk\xe1 objekt, kter\xfd nezamkla")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"na konci transakce nezu\u030astane \u017e\xe1dn\xfd objekt zam\u010den\xfd"))),Object(c.b)("p",null,"Jestli\u017ee v\u0161echny transakce v dan\xe9 mno\u017ein\u011b transakc\xed T jsou:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"dob\u0159e formovan\xe9")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"dvouf\xe1zov\xe9"))),Object(c.b)("p",null,Object(c.b)("span",Object(n.a)({parentName:"p"},{className:"math math-inline"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"katex"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"katex-mathml"}),Object(c.b)("math",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/1998/Math/MathML"}),Object(c.b)("semantics",{parentName:"math"},Object(c.b)("mrow",{parentName:"semantics"},Object(c.b)("mo",{parentName:"mrow"},"\u21d2")),Object(c.b)("annotation",Object(n.a)({parentName:"semantics"},{encoding:"application/x-tex"}),"\\Rightarrow")))),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"katex-html","aria-hidden":"true"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"base"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"strut",style:{height:"0.36687em",verticalAlign:"0em"}})),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"mrel"}),"\u21d2")))))," pak ka\u017ed\xfd jejich leg\xe1ln\xed rozvrh je uspo\u0159\xe1dateln\xfd."))}i.isMDXComponent=!0}}]);
---
subject: DBS
---

# Normalizace

Cílem normalizace je minimalizovat redundanci data a aktualizační
anomálie. Měla by vést k vzniku tabulek, které lze snadno udržovat.

## Fuknční závislost

$X$ je množina všech atributů, $Y$ a $Z$ jsou $\subseteq$ $X$. $Z$
závisí funkčně na $Y$, jestliže ke každé $Y$ hodnotě existuje maximálně
jedna $Z$ hodnota. Značí se jako $Y \rightarrow Z$.

### Příklad

-   ke každému kinu existuje nanejvýš jedna adresa $\Rightarrow$
    nazev_kina $\rightarrow$ adresa

    -   název kina určuje atribut adresa

    -   naopak adresa závizí na názvu kina

-   pro každou dvojici kino, film existuje nejvýše jedno datum, kdy se
    film v kině vysílá $\Rightarrow$ nazev_kina, jmeno_filmu
    $\rightarrow$ datum

    -   dvojice jméno kina a jméno filmu určuje atribut datum

    -   datum závisí na dvojici jmen

### Amstrongova pravidla

-   triviální funkční závislost = jestliže Y je $\subseteq$ X, pak X
    $\rightarrow$ Y

-   tranzitivita = jestliže X $\rightarrow$ Y a Y $\rightarrow$ Z, pak X
    $\rightarrow$ Z

-   kompozice pravé strany = X $\rightarrow$ Y a X $\rightarrow$ Z, pak
    X $\rightarrow$ YZ

-   dekompozice pravé strany = X $\rightarrow$ YZ, pak X $\rightarrow$ Y
    a X $\rightarrow$ Z

### Klíč relace

Řekněme R(A), kde K je $\subseteq$ A. Tak K je klíčem schématu R(A),
jestliže splňuje dvě vlastnosti:

-   K $\rightarrow$ A

-   neexistuje K' $\subset$ K taková, že K' $\rightarrow$ A

# Normální formy

-   1NF - atributy jsou atomické (nexistují strukturované a
    vicehodnotové atributy)

-   2NF - žádný neklíčový atribut není závislý na části klíče (vždy
    závisí na celém)

-   3NF - jsou-li všechny neklíčové atributy závislé na klíči přímo a
    nikoliv tranzitivně

    -   nesmí tranzitivně záviset na jiném klíči

    -   nesmí záviset na jiném neklíčovém atributu

    -   musí záviset pouze na primárním klíči

## BCNF - Boyce-Coddova normální forma

Schéma relace R je v BNFC, jestliže pro každou netriviální závistlo X
$\rightarrow$ Y platí, že X obsahuje klíč schématu R. Pokud je schéma v
BCNF, pak je i v 3NF.

# Normalizace

Eliminace aktualizačních anomálií se zajišťuje převedením relačního
schématu do 3NF (resp. BCNF). Lze normalizovat pomocí dekompozice.
Požadavky dekompozice:

-   výsledná schémata by měla mít \"stejnou\" sémantiku - nové i staré
    schéma musí mít stejnou funkční závislost

-   nová relace by měla obsahovat \"stejná\" data, jaká by obsahovala
    původní relace

-   o dekompozici lze uvažovat jako o projekcích původní relace, kde
    každá projekce definujé nové relace, a jejich spojením se musí
    dostat stejná data jako měla původní relace -
    `beztrátová dekompozice`

## Beztrátová dekompozice

Musí být splněna pravidla:

-   schéma R([A]{.ul},B,C), kde A, B, C jsou disjuktní, a je splněna
    funkční závislost B $\rightarrow$ C

-   po rozdělení R na schémata R1([B]{.ul},C) a R2([A]{.ul},B)
    $\Leftrightarrow$ je rozdělení (dekompozice) bezztrátové

Normalizace je důležitá u \"write intesive\" databází, databáze kde se
hodně zapisují a upravují data. Naopak u \"read only\" databází se
vyplatí denormalizace, zavedením redundance se sníží odezva na
složitejší dotazy, protože denormalizované databáze mají většinou méně
tabulek než normalizované. A každé spojování tabulek při dotazování
prodlužuje dobu odezvy.
